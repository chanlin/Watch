package com.jajale.watch.adapter;import android.content.Context;import android.net.Uri;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.TextView;import com.jajale.watch.R;import com.jajale.watch.image.JJLImageLoader;import com.ximalaya.ting.android.opensdk.model.album.Album;import java.util.List;/** * Created by Sunzhigang on 2016/3/10. */public class XMLYAlbumAdapter extends BaseAdapter {    Context context;    List<Album> albumList;    public XMLYAlbumAdapter(Context context) {        this.context = context;    }    public void clearDate() {        albumList.clear();    }    public void setData(List<Album> albumList) {        if (this.albumList != null) {            this.albumList.addAll(albumList);        } else {            this.albumList = albumList;        }        notifyDataSetChanged();    }    @Override    public int getCount() {        return albumList != null ? albumList.size() : 0;    }    @Override    public Object getItem(int position) {        return albumList != null ? albumList.get(position) : null;    }    @Override    public long getItemId(int position) {        return position;    }    @Override    public View getView(int position, View convertView, ViewGroup parent) {        ViewHolder holder = null;        if (convertView == null) {            holder = new ViewHolder();            convertView = LayoutInflater.from(context).inflate(R.layout.xmly_list_item, null);            holder.album_iv = (ImageView) convertView.findViewById(R.id.image_view);            holder.title_tv = (TextView) convertView.findViewById(R.id.title_name);            holder.describe_tv = (TextView) convertView.findViewById(R.id.describe_tv);            holder.all_set_num_tv = (TextView) convertView.findViewById(R.id.all_set_tv);            convertView.setTag(holder);        } else {            holder = (ViewHolder) convertView.getTag();        }        if (albumList != null) {            Uri uri = Uri.parse(albumList.get(position).getCoverUrlSmall());            JJLImageLoader.downloadRoundImage(context,uri.toString(),holder.album_iv);//            holder.album_iv.setImageURI(uri);            String title = albumList.get(position).getAlbumTitle();            holder.title_tv.setText(title == null ? "" : title);            String describe = albumList.get(position).getAlbumIntro();            holder.describe_tv.setText(describe == null ? "" : describe);            long allset = albumList.get(position).getIncludeTrackCount();            holder.all_set_num_tv.setText("共" + allset + " 集");        }        String title = albumList.get(position).getAlbumTitle();        final String  albumTitle=(title == null ? "" : title);        final long lastListenID = albumList.get(position).getSoundLastListenId();        final long albumid = albumList.get(position).getId();        final String albumLagerPicUrl = albumList.get(position).getCoverUrlLarge();        convertView.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View view) {                onItemClickListener.onItemClick(albumTitle,albumid + "", albumLagerPicUrl,lastListenID);            }        });        return convertView;    }    static class ViewHolder {        ImageView album_iv;        TextView title_tv;        TextView describe_tv;        TextView all_set_num_tv;    }    private OnItemClickListener onItemClickListener;    public void setOnItemClickListener(OnItemClickListener onItemClickListener) {        this.onItemClickListener = onItemClickListener;    }    public interface OnItemClickListener {        void onItemClick(String albumTitle,String albumID, String albumpicurl, long lastListenID);    }}